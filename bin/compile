#!/bin/bash

BUILD_DIR=$1
CACHE_DIR=$2
ENV_DIR=$3

sudo apt-get install awscli

# By specifying the static directory, we can sync only the static files and to the correct directory in the application
S3_BUCKET="s3://housekeep-legacy-styles/static/"

# Define the local directory where you want to store the files
STATIC_DIR="$BUILD_DIR/housekeep/static/"

# Make sure we're at the root level
cd "$BUILD_DIR" || exit

# Make sure the local directory exists
mkdir -p "$STATIC_DIR"

echo "Syncing static files..."

# Use AWS CLI to sync the S3 bucket to the local directory
aws s3 sync "$S3_BUCKET" "$STATIC_DIR" --no-sign-request

echo "Syncing complete"

# --no-sign-request tells AWS CLI that the bucket is public and does not require credentials
